<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>English Word Quiz</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 40px; background: #f9f9f9; }
    #quiz-box { margin-top: 40px; }
    #question { font-size: 24px; margin-bottom: 20px; }
    #result { margin-top: 20px; font-size: 18px; }
    .correct { color: green; font-weight: bold; }
    .wrong { color: red; font-weight: bold; }
    .small { font-size: 14px; color: #555; }
    #stats { margin-top: 30px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>English Word Quiz</h1>
  <div id="quiz-box">
    <div id="question"></div>
    <input type="text" id="answer">
    <button onclick="checkAnswer()">í™•ì¸</button>
    <div id="result"></div>
    <div id="stats"></div>
  </div>

  <script>
    // ë‹¨ì–´ ëª©ë¡
    const words = [
      { en: "declare", ko: "ì„ ì–¸í•˜ë‹¤" },
      { en: "recognition", ko: "ì•Œì•„ë´„, ì¸ì‹" },
      { en: "commitment", ko: "ì•½ì†, ì „ë…" },
      { en: "ease", ko: "ì‰¬ì›€, ìš©ì´í•¨, í¸ì˜ì„±" },
      { en: "domestic", ko: "êµ­ë‚´ì˜" },
      { en: "tension", ko: "ê¸´ì¥ ìƒíƒœ" },
      { en: "concern", ko: "ì˜í–¥ì„ ë¯¸ì¹˜ë‹¤, ê´€ë ¨ë˜ë‹¤, ë°°ë ¤, ì—¼ë ¤" },
      { en: "humanitarian", ko: "ì¸ë„ì£¼ì˜ì ì¸" },
      { en: "crisis", ko: "ìœ„ê¸°" },
      { en: "conference", ko: "íšŒì˜" },
      { en: "condemned", ko: "ë¹„ë‚œë°›ì€, ìœ ì£„ ì„ ê³ ë¥¼ ë°›ì€" },
      { en: "lasting", ko: "ì˜ì†ì ì¸" },
      { en: "settlement", ko: "í•©ì˜" },
      { en: "occupation", ko: "ì§ì—…" },
      { en: "absurd", ko: "ìš°ìŠ¤ê½ìŠ¤ëŸ¬ìš´, í„°ë¬´ë‹ˆì—†ëŠ”" },
      { en: "insist", ko: "ê³ ì§‘í•˜ë‹¤" },
      { en: "senior", ko: "ê³ ìœ„" },
      { en: "further", ko: "ë” ë©€ë¦¬ì—" },
      { en: "sanction", ko: "ì œì¬" },
      { en: "elected", ko: "ì„ ì¶œëœ" },
      { en: "criticism", ko: "ë¹„íŒ" },
      { en: "response", ko: "ëŒ€ë‹µ, ì‘ë‹µ, íšŒì‹ , ë‹µì¥" },
      { en: "expected", ko: "ì˜ˆìƒë˜ëŠ”" },
      { en: "annual", ko: "ë§¤ë…„ì˜" },
      { en: "prime minister", ko: "ìˆ˜ìƒ" },
      { en: "secure", ko: "ì•ˆì‹¬í•˜ëŠ”" },
      { en: "alongside", ko: "ì˜†ì—, ë‚˜ë€íˆ" },
      { en: "a viable", ko: "ê°€ëŠ¥í•œ" },
      { en: "neither", ko: "ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤" },
      { en: "attempt", ko: "ì‹œë„, ì‹œë„í•˜ë‹¤" },
      { en: "brutal", ko: "ì”í˜¹í•œ, ì•…ë„í•œ" },
      { en: "genuine", ko: "ì§„ì§œì˜, ì§„í’ˆì˜" },
      { en: "exact", ko: "ì •í™•í•œ" },
      { en: "opposite", ko: "ë‹¤ë¥¸ í¸" },
      { en: "concluded", ko: "ê²°ë¡ ì„ ë‚´ë¦¬ë‹¤" },
      { en: "relentless", ko: "ìˆ˜ê·¸ëŸ¬ë“¤ì§€ ì•ŠëŠ”" },
      { en: "increasing", ko: "ì¦ê°€í•˜ëŠ”" },
      { en: "bombardment", ko: "í¬ê²©" },
      { en: "offensive", ko: "ëª¨ìš•ì ì¸" },
      { en: "starvation", ko: "ê¸°ì•„, êµ¶ì£¼ë¦¼" },
      { en: "devastation", ko: "ëŒ€ëŒ€ì ì¸ íŒŒê´´" },
      { en: "utterly", ko: "ì™„ì „íˆ" },
      { en: "intolerable", ko: "ê²¬ë”œ ìˆ˜ ì—†ëŠ”" },
      { en: "horrify", ko: "ëª¸ì„œë¦¬ì¹˜ê²Œ ë§Œë“¤ë‹¤" }
    ];

    let queue = [...words];       // í˜„ì¬ ì¶œì œí•  ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸
    let wrongList = [];           // í‹€ë¦° ë‹¨ì–´ ì„ì‹œ ì €ì¥
    let current = null;
    let stats = { total: 0, correct: 0, wrong: 0, round: 1 };

    const qElem = document.getElementById("question");
    const answerInput = document.getElementById("answer");
    const resultArea = document.getElementById("result");
    const statsArea = document.getElementById("stats");

    function updateStatsDisplay() {
      statsArea.textContent = `Round ${stats.round} | ì´ ${stats.total}ë¬¸ì œ / ì •ë‹µ ${stats.correct} / ì˜¤ë‹µ ${stats.wrong}`;
    }

    function normalizeAnswer(str) {
      return str.trim().toLowerCase();
    }

    function acceptedAnswersFrom(str) {
      return str.split(/[,\[\]]/).map(s => normalizeAnswer(s)).filter(Boolean);
    }

    function escapeHtml(str) {
      return str.replace(/[&<>"']/g, m => ({
        "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;"
      }[m]));
    }

    function nextQuestion() {
      if (queue.length === 0) {
        if (wrongList.length > 0) {
          // ì˜¤ë‹µë§Œ ëª¨ì•„ì„œ ìƒˆë¡œìš´ ë¼ìš´ë“œ
          queue = [...wrongList];
          wrongList = [];
          stats.round++;
          resultArea.innerHTML = `<span class="wrong">ì˜¤ë‹µ ë³µìŠµ ë¼ìš´ë“œ ì‹œì‘!</span>`;
          setTimeout(nextQuestion, 1000);
          return;
        } else {
          // ëª¨ë‘ ë§ìŒ
          qElem.textContent = "ğŸ‰ ëª¨ë“  ë‹¨ì–´ë¥¼ ë§ì·„ìŠµë‹ˆë‹¤!";
          resultArea.textContent = "";
          return;
        }
      }

      const idx = Math.floor(Math.random() * queue.length);
      current = { ...queue[idx], showLang: Math.random() < 0.5 ? "en" : "ko" };
      queue.splice(idx, 1); // ì¶œì œí•œ ë‹¨ì–´ ì œê±°
      qElem.textContent = current[current.showLang];
      answerInput.value = "";
      resultArea.textContent = "";
      answerInput.focus();
    }

    function checkAnswer() {
      if (!current) return;
      const user = normalizeAnswer(answerInput.value);
      if (!user) {
        resultArea.innerHTML = '<span class="wrong">ì…ë ¥ê°’ì´ ë¹„ì—ˆìŠµë‹ˆë‹¤.</span>';
        return;
      }

      let match = false;
      if (current.showLang === "en") {
        const opts = acceptedAnswersFrom(current.ko);
        match = opts.some(opt => user === opt);
      } else {
        const opts = acceptedAnswersFrom(current.en);
        match = opts.some(opt => user === opt);
      }

      stats.total++;
      if (match) {
        stats.correct++;
        resultArea.innerHTML = '<span class="correct">ë§ì•˜ìŠµë‹ˆë‹¤.</span>';
        updateStatsDisplay();
        setTimeout(nextQuestion, 700);
      } else {
        stats.wrong++;
        wrongList.push(current); // í‹€ë¦° ë‹¨ì–´ ì €ì¥
        const ans = (current.showLang === "en") ? current.ko : current.en;
        resultArea.innerHTML = '<span class="wrong">í‹€ë ¸ìŠµë‹ˆë‹¤.</span><div class="small">ì •ë‹µ: ' + escapeHtml(ans) + '</div>';
        updateStatsDisplay();
        setTimeout(nextQuestion, 1200);
      }
    }

    // Enter í‚¤ ì…ë ¥ ì²˜ë¦¬
    answerInput.addEventListener("keydown", e => {
      if (e.key === "Enter") checkAnswer();
    });

    updateStatsDisplay();
    nextQuestion();
  </script>
</body>
</html>
